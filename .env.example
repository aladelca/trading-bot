# Runtime
APP_ENV=dev
PAPER_MODE=true
TIMEZONE=America/Toronto

# Strategy scope
TRADING_UNIVERSE=SPY,QQQ
ALLOW_EXTENDED_HOURS=true
MAX_TRADES_PER_DAY=4
MAX_OPEN_POSITIONS=2

# Risk
RISK_PER_TRADE=0.005
DAILY_MAX_DRAWDOWN=0.02
WEEKLY_MAX_DRAWDOWN=0.05

# Telegram (approval gate)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Questrade (fill when ready)
QUESTRADE_CLIENT_ID=
QUESTRADE_REFRESH_TOKEN=
QUESTRADE_PRACTICE=true

# Audit
AUDIT_DB_PATH=data/audit.db
PORTFOLIO_DB_PATH=data/portfolio.db
BASE_CURRENCY=USD
FX_RATES_JSON={"USD":1.0,"CAD":0.75}
TRADE_CURRENCY=USD
APPROVAL_REQUIRED=true
APPROVAL_TIMEOUT_SECONDS=300

# Live execution guardrails (must both be set for live mode)
LIVE_TRADING_ENABLED=false
LIVE_TRADING_CONFIRM=
LIVE_ORDER_DRY_RUN=true
BROKER_VALIDATION_MODE=enforce
BROKER_VALIDATION_AUTO_REVERT=true
BROKER_VALIDATION_REPORT_ONLY_SINCE_UTC=
BROKER_VALIDATION_REPORT_ONLY_MAX_MINUTES=0
BROKER_VALIDATION_ALERT_MAX_BLOCKED_RATE=0.25
BROKER_VALIDATION_ALERT_MAX_BROKER_ERROR_RATE=0.10
BROKER_VALIDATION_ALERT_MAX_AUTO_REVERTED_RATE=0.05

# Controlled automation (optional, disabled by default)
AUTO_APPROVE_ENABLED=false
AUTO_APPROVE_MIN_CONFIDENCE=0.90
AUTO_APPROVE_SYMBOLS=SPY,QQQ
AUTO_APPROVE_ALLOWED_TIERS=tier-1,tier-2

# Agent communication bridge (CLI/session)
AGENT_CLI_ENABLED=false
AGENT_CLI_ALLOWED_COMMANDS=python
AGENT_CLI_TIMEOUT_SECONDS=5
AGENT_CLI_MAX_RETRIES=1
AGENT_CLI_RETRY_BACKOFF_SECONDS=0.2
AGENT_ALLOWED_ROUTES=signal:risk,risk:approval,approval:execution

# Telegram webhook (production-style path)
TELEGRAM_WEBHOOK_SECRET=
WEBHOOK_HOST=0.0.0.0
WEBHOOK_PORT=8080
WEBHOOK_PATH=/telegram/webhook
WEBHOOK_DB_PATH=data/webhook.db
WEBHOOK_MAX_BODY_BYTES=65536
WEBHOOK_WORKER_POLL_SECONDS=1.0
WEBHOOK_WORKER_BATCH_SIZE=50
WEBHOOK_PUBLIC_DOMAIN=bot.example.com
CERTBOT_EMAIL=ops@example.com
WEBHOOK_HEALTH_HOST=https://127.0.0.1
WEBHOOK_HEALTH_PATH=/health
WEBHOOK_EVIDENCE_DIR=/tmp/webhook-evidence
WEBHOOK_ALERT_CHANNEL=telegram
WEBHOOK_ALERT_TARGET=
WEBHOOK_ALERT_SEVERITY=high
WEBHOOK_ALERT_DRY_RUN=true
WEBHOOK_ALERT_MAX_ATTEMPTS=3
WEBHOOK_ALERT_RETRY_BACKOFF_SECONDS=0.2

# Governance scheduled delivery
GOV_DELIVERY_CHANNEL=telegram
GOV_DELIVERY_TARGET=
GOV_CALIBRATION_CRON_EXPR=0 13 * * 1
